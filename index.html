<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Serene Verse</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    :root {
      --bg: #181b1f;
      --card-bg: #23262b;
      --text: #e9eef3;
      --accent: #6caee0;
      --border: #2d3440;
      --verse-font: 'Georgia', serif;
      --transition: 0.4s cubic-bezier(.4,0,.2,1);
      --overlay: rgba(24,27,31,0.85);
      --menu-divider: #22242a;
    }
    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
      background: var(--bg);
      color: var(--text);
      font-family: 'Roboto', Arial, sans-serif;
      min-height: 100vh;
      width: 100vw;
      box-sizing: border-box;
    }
    body {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      min-height: 100vh;
      background: linear-gradient(135deg, #181b1f 0%, #23262b 100%);
      position: relative;
    }
    .container {
      width: 100%;
      max-width: 400px;
      margin: 0 auto;
      margin-top: 10vh;
      text-align: center;
      flex: 1;
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
    }
    .topbar {
      width: 100vw;
      max-width: 100vw;
      height: 0;
      position: fixed;
      top: 0;
      left: 0;
      z-index: 10;
    }
    .hamburger {
      position: absolute;
      top: 22px;
      left: 22px;
      width: 34px;
      height: 34px;
      background: none;
      border: none;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      cursor: pointer;
      z-index: 20;
      padding: 0;
    }
    .hamburger span {
      display: block;
      width: 24px;
      height: 3px;
      background: var(--accent);
      border-radius: 2px;
      margin: 3px 0;
      transition: all .3s;
    }
    h1 {
      font-weight: 400;
      font-size: 2rem;
      margin-bottom: 2.5em;
      letter-spacing: .02em;
      color: var(--accent);
    }
    select {
      width: 100%;
      padding: 0.8em 1em;
      font-size: 1.1em;
      border-radius: 10px;
      border: none;
      margin-bottom: 1em;
      background: #23262b;
      color: var(--text);
      box-shadow: 0 2px 10px #1b1e24;
      outline: none;
      transition: background var(--transition);
      appearance: none;
    }
    select:focus {
      background: var(--card-bg);
    }
    button[type="submit"] {
      width: 100%;
      padding: 0.8em;
      border-radius: 10px;
      border: none;
      background: var(--accent);
      color: #fff;
      font-size: 1.1em;
      font-weight: 500;
      cursor: pointer;
      margin-bottom: 1.5em;
      transition: background var(--transition);
      box-shadow: 0 2px 8px #1b1e24;
    }
    button[type="submit"]:active {
      background: #5b99c7;
    }
    .card {
      background: var(--card-bg);
      border-radius: 16px;
      box-shadow: 0 6px 32px 0 #16181c;
      padding: 2em 1.2em;
      margin-top: 2em;
      min-height: 140px;
      text-align: left;
      position: relative;
      transition: box-shadow var(--transition), opacity var(--transition), transform var(--transition);
      opacity: 0;
      transform: translateY(20px);
      will-change: opacity, transform;
      font-size: 1.15rem;
      border: 1px solid var(--border);
    }
    .card.show {
      opacity: 1;
      transform: translateY(0);
    }
    .verse {
      font-family: var(--verse-font);
      font-size: 1.22em;
      margin-bottom: .7em;
      color: var(--text);
      line-height: 1.45;
      letter-spacing: .01em;
    }
    .verse-ref {
      color: var(--accent);
      font-size: 1em;
      display: block;
      margin-bottom: .8em;
    }
    .tafsir-toggle {
      display: inline-block;
      color: var(--accent);
      background: none;
      border: none;
      font-size: 1em;
      cursor: pointer;
      text-decoration: underline;
      margin-bottom: .7em;
      margin-top: .3em;
      padding: 0;
      transition: color var(--transition);
    }
    .tafsir {
      margin-top: 0.8em;
      font-size: 1.02em;
      color: #c7d5e0;
      background: #22242a;
      padding: .7em 1em;
      border-radius: 10px;
      display: none;
      line-height: 1.5;
    }
    /* Drawer styles */
    .drawer {
      position: fixed;
      top: 0; left: 0;
      width: 290px;
      max-width: 90vw;
      height: 100vh;
      background: var(--card-bg);
      box-shadow: 2px 0 18px #16181c;
      border-right: 1px solid var(--border);
      z-index: 30;
      transform: translateX(-100%);
      transition: transform .35s cubic-bezier(.5,0,.2,1);
      display: flex;
      flex-direction: column;
      padding: 2.5em 1.3em 1em 1.3em;
    }
    .drawer.open {
      transform: translateX(0);
    }
    .drawer-close {
      background: none;
      border: none;
      color: var(--accent);
      font-size: 2em;
      position: absolute;
      top: 18px;
      right: 18px;
      cursor: pointer;
      opacity: 0.7;
      z-index: 31;
      transition: opacity .2s;
    }
    .drawer-close:active { opacity: 1; }
    .prayer-title {
      font-weight: 500;
      margin-bottom: 1.4em;
      color: var(--accent);
      font-size: 1.18em;
      text-align: left;
      letter-spacing: .03em;
    }
    .menu-times {
      display: flex;
      flex-direction: column;
      gap: 1.3em;
      margin-bottom: 2em;
    }
    .menu-item {
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      justify-content: flex-start;
      padding-bottom: 1em;
      border-bottom: 1px solid var(--menu-divider);
      min-width: 140px;
    }
    .menu-item:last-child {
      border-bottom: none;
      padding-bottom: 0;
    }
    .menu-label {
      font-size: 1.08em;
      font-weight: 500;
      color: var(--accent);
      margin-bottom: .2em;
      letter-spacing: .02em;
    }
    .menu-value {
      font-size: 1.05em;
      color: var(--text);
      font-weight: 400;
      letter-spacing: .01em;
    }
    .overlay {
      position: fixed;
      top: 0; left: 0;
      width: 100vw; height: 100vh;
      background: var(--overlay);
      z-index: 29;
      opacity: 0;
      pointer-events: none;
      transition: opacity .32s cubic-bezier(.5,0,.2,1);
    }
    .overlay.open {
      opacity: 1;
      pointer-events: all;
    }
    .footer {
      text-align: center;
      color: #b6e0ff;
      font-size: 1.04em;
      margin: 3em auto 1.2em auto;
      letter-spacing: .01em;
      opacity: .65;
      flex-shrink: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: .2em;
    }
    .footer .heart {
      color: #e57373;
      font-size: 1.12em;
      margin: 0 .18em;
      vertical-align: middle;
      display: inline-block;
      animation: heartBeat .9s infinite alternate;
    }
    @keyframes heartBeat {
      to { transform: scale(1.14); }
    }
    @media (max-width: 600px) {
      .container {
        margin-top: 6vh;
        max-width: 97vw;
      }
      .card {
        padding: 1em;
      }
      select, button[type="submit"] {
        font-size: 1.13em;
      }
      .drawer {
        padding: 1.5em .7em 1em .9em;
        width: 93vw;
      }
      .footer { font-size: 1em;}
    }
  </style>
</head>
<body>
  <div class="topbar">
    <button class="hamburger" id="drawerOpenBtn" aria-label="Open menu">
      <span></span>
      <span></span>
      <span></span>
    </button>
  </div>
  <div class="overlay" id="drawerOverlay"></div>
  <div class="drawer" id="drawer">
    <button class="drawer-close" id="drawerCloseBtn" aria-label="Close menu">&times;</button>
    <div class="prayer-title">Prayer Time</div>
    <div class="menu-times" id="drawerPrayerTimes"></div>
  </div>
  <div class="container">
    <h1>Serene Verse</h1>
    <form id="feeling-form" autocomplete="off">
      <select id="feeling" required>
        <option value="" disabled selected>Select your feeling</option>
        <option value="sad">Sad</option>
        <option value="anxious">Anxious</option>
        <option value="hopeful">Hopeful</option>
        <option value="grateful">Grateful</option>
        <option value="angry">Angry</option>
        <option value="lost">Lost</option>
        <option value="fearful">Fearful</option>
        <option value="happy">Happy</option>
        <option value="seeking-guidance">Seeking Guidance</option>
        <option value="stressed">Stressed</option>
        <option value="lonely">Lonely</option>
        <option value="thankful">Thankful</option>
        <option value="seeking-forgiveness">Seeking Forgiveness</option>
      </select>
      <button type="submit">Show Guidance</button>
    </form>
    <div id="result" class="card"></div>
  </div>
  <div class="footer">
    Made with <span class="heart">&#10084;</span> for Allah
  </div>
  <script>
    // Mapping of feelings to verses/hadiths
    const data = {
      sad: [
        { text: "So verily, with the hardship, there is relief.", ref: "Quran 94:6", tafsir: "Allah assures that every hardship will be followed by ease, giving hope to the sad." },
        { text: "Do not grieve; indeed Allah is with us.", ref: "Quran 9:40", tafsir: "Reminds us that Allah's support is always present, especially in times of sadness." }
      ],
      anxious: [
        { text: "And whoever puts his trust in Allah, then He will suffice him.", ref: "Quran 65:3", tafsir: "Reliance on Allah brings tranquility and removes anxiety." }
      ],
      hopeful: [
        { text: "And do not lose hope in the mercy of Allah. Indeed, none despairs of relief from Allah except the disbelieving people.", ref: "Quran 12:87", tafsir: "The mercy of Allah is vast, never lose hope." }
      ],
      grateful: [
        { text: "If you are grateful, I will surely increase your favor upon you.", ref: "Quran 14:7", tafsir: "Gratitude is rewarded by Allah with more blessings." }
      ],
      angry: [
        { text: "The strong is not the one who overcomes people by his strength, but the strong is the one who controls himself while in anger.", ref: "Hadith - Sahih Bukhari", tafsir: "True strength lies in self-control, not aggression." }
      ],
      lost: [
        { text: "And He found you lost and guided [you].", ref: "Quran 93:7", tafsir: "Allah guides those who are lost, if they seek Him." }
      ],
      fearful: [
        { text: "Do not fear, I am with you, I hear and I see.", ref: "Quran 20:46", tafsir: "Allah's presence should eliminate fear." }
      ],
      happy: [
        { text: "Say: 'In the bounty of Allah and in His mercy â€” in that let them rejoice; it is better than what they accumulate.'", ref: "Quran 10:58", tafsir: "True happiness is found in Allah's mercy and bounty." }
      ],
      "seeking-guidance": [
        { text: "Guide us to the straight path.", ref: "Quran 1:6", tafsir: "A prayer for guidance, repeated every prayer." }
      ],
      stressed: [
        { text: "Allah does not burden a soul beyond that it can bear.", ref: "Quran 2:286", tafsir: "You will never face more than you can handle." }
      ],
      lonely: [
        { text: "And He is with you wherever you are.", ref: "Quran 57:4", tafsir: "Allah is always with you, even in loneliness." }
      ],
      thankful: [
        { text: "If you are grateful, I will surely increase your favor upon you.", ref: "Quran 14:7", tafsir: "Thankfulness brings more blessings from Allah." }
      ],
      "seeking-forgiveness": [
        { text: "And seek forgiveness of your Lord and repent to Him.", ref: "Quran 11:3", tafsir: "Forgiveness is always available, just ask and repent." }
      ]
    };

    function pickRandom(arr) {
      return arr[Math.floor(Math.random() * arr.length)];
    }

    // Show verse/hadith
    const resultDiv = document.getElementById('result');
    document.getElementById('feeling-form').addEventListener('submit', function(e) {
      e.preventDefault();
      const feeling = document.getElementById('feeling').value;
      if (data[feeling]) {
        const verseObj = pickRandom(data[feeling]);
        resultDiv.innerHTML = `
          <span class="verse">${verseObj.text}</span>
          <span class="verse-ref">${verseObj.ref}</span>
          <button class="tafsir-toggle">Show explanation</button>
          <div class="tafsir">${verseObj.tafsir}</div>
        `;
        resultDiv.classList.remove('show');
        setTimeout(() => resultDiv.classList.add('show'), 30);
        // Tafsir toggle
        const tafsirToggle = resultDiv.querySelector('.tafsir-toggle');
        const tafsirDiv = resultDiv.querySelector('.tafsir');
        tafsirToggle.onclick = function() {
          if (tafsirDiv.style.display === 'block') {
            tafsirDiv.style.display = 'none';
            tafsirToggle.textContent = 'Show explanation';
          } else {
            tafsirDiv.style.display = 'block';
            tafsirToggle.textContent = 'Hide explanation';
          }
        };
      } else {
        resultDiv.innerHTML = '';
        resultDiv.classList.remove('show');
      }
    });

    // Drawer logic
    const drawer = document.getElementById('drawer');
    const drawerOverlay = document.getElementById('drawerOverlay');
    const drawerOpenBtn = document.getElementById('drawerOpenBtn');
    const drawerCloseBtn = document.getElementById('drawerCloseBtn');
    drawerOpenBtn.onclick = () => {
      drawer.classList.add('open');
      drawerOverlay.classList.add('open');
    };
    drawerCloseBtn.onclick = () => {
      drawer.classList.remove('open');
      drawerOverlay.classList.remove('open');
    };
    drawerOverlay.onclick = () => {
      drawer.classList.remove('open');
      drawerOverlay.classList.remove('open');
    };

    // Prayer Time Drawer (Qatar)
    async function getPrayerTimesDrawer() {
      try {
        const resp = await fetch('https://api.aladhan.com/v1/timingsByCity?city=Doha&country=Qatar&method=2');
        const data = await resp.json();
        const t = data.data.timings;
        const menuTimes = [
          { label: "Fajr", value: t.Fajr },
          { label: "Dhuhr", value: t.Dhuhr },
          { label: "Asr", value: t.Asr },
          { label: "Maghrib", value: t.Maghrib },
          { label: "Isha", value: t.Isha }
        ];
        document.getElementById('drawerPrayerTimes').innerHTML = menuTimes.map(item =>
          `<div class="menu-item">
            <div class="menu-label">${item.label}</div>
            <div class="menu-value">${item.value}</div>
          </div>`
        ).join('');
      } catch {
        document.getElementById('drawerPrayerTimes').innerHTML = '<div class="menu-item">Unable to load prayer times.</div>';
      }
    }
    drawerOpenBtn.addEventListener('click', getPrayerTimesDrawer);
  </script>
</body>
</html>
